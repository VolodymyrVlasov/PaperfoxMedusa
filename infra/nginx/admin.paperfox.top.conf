server {
  listen 443 ssl http2;
  server_name admin.paperfox.top;

  ssl_certificate     /etc/letsencrypt/live/admin.paperfox.top/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/admin.paperfox.top/privkey.pem;

  # редирект / → /app/
  location = / {
    return 302 /app/;
  }

  # SPA адмінки під /app/
  location ^~ /app/ {
    alias /home/deploy/apps/medusa-paperfox/.medusa/server/public/admin/;
    index index.html;
    try_files $uri $uri/ /app/index.html;
  }

  # кеш статичних
  location ~* ^/app/.*\.(?:ico|css|js|gif|jpe?g|png|svg|webp|woff2?|ttf)$ {
    alias /home/deploy/apps/medusa-paperfox/.medusa/server/public/admin/;
    expires 7d;
    access_log off;
    add_header Cache-Control "public";
    try_files $uri =404;
  }
}
